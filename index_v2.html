<!DOCTYPE html>
<html>
<head>
    <title>Task Assignment Study</title>
    <script src="https://unpkg.com/jspsych@7.3.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0"></script>
    <link href="https://unpkg.com/jspsych@7.3.3/css/jspsych.css" rel="stylesheet" type="text/css" />
    <style>
        .task-assignment-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .column {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .column-header {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
        }
        
        .task-item {
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .task-name {
            font-weight: bold;
            font-size: 16px;
            margin: 0;
        }
        
        .assignment-dropdown {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
            min-width: 200px;
        }
        
        .assignment-dropdown:focus {
            outline: none;
            border-color: #007cba;
            box-shadow: 0 0 0 2px rgba(0, 124, 186, 0.2);
        }
        
        .submit-container {
            text-align: center;
            margin-top: 30px;
        }
        
        .submit-btn {
            background-color: #007cba;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .submit-btn:hover {
            background-color: #005a87;
        }
        
        .submit-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body></body>

<script>
    const jsPsych = initJsPsych({
        on_finish: function(data) {
            jsPsych.data.displayData();
        }
    });

    const task_assignment_trial = {
        type: jsPsychHtmlButtonResponse,
        stimulus: function() {
            return `
                <div class="task-assignment-container">
                    <div class="column">
                        <div class="column-header">To Do</div>
                        
                        <div class="task-item">
                            <div class="task-name">Task 1</div>
                            <select class="assignment-dropdown" name="task1">
                                <option value="">Select assignee...</option>
                                <option value="Jane Smith (Remote)">Jane Smith (Remote)</option>
                                <option value="Ryan Lee (Hybrid)">Ryan Lee (Hybrid)</option>
                                <option value="Maria Garcia (In-person)">Maria Garcia (In-person)</option>
                            </select>
                        </div>
                        
                        <div class="task-item">
                            <div class="task-name">Task 2</div>
                            <select class="assignment-dropdown" name="task2">
                                <option value="">Select assignee...</option>
                                <option value="Jane Smith (Remote)">Jane Smith (Remote)</option>
                                <option value="Ryan Lee (Hybrid)">Ryan Lee (Hybrid)</option>
                                <option value="Maria Garcia (In-person)">Maria Garcia (In-person)</option>
                            </select>
                        </div>
                        
                        <div class="task-item">
                            <div class="task-name">Task 3</div>
                            <select class="assignment-dropdown" name="task3">
                                <option value="">Select assignee...</option>
                                <option value="Jane Smith (Remote)">Jane Smith (Remote)</option>
                                <option value="Ryan Lee (Hybrid)">Ryan Lee (Hybrid)</option>
                                <option value="Maria Garcia (In-person)">Maria Garcia (In-person)</option>
                            </select>
                        </div>
                        
                        <div class="task-item">
                            <div class="task-name">Task 4</div>
                            <select class="assignment-dropdown" name="task4">
                                <option value="">Select assignee...</option>
                                <option value="Jane Smith (Remote)">Jane Smith (Remote)</option>
                                <option value="Ryan Lee (Hybrid)">Ryan Lee (Hybrid)</option>
                                <option value="Maria Garcia (In-person)">Maria Garcia (In-person)</option>
                            </select>
                        </div>
                        
                        <div class="task-item">
                            <div class="task-name">Task 5</div>
                            <select class="assignment-dropdown" name="task5">
                                <option value="">Select assignee...</option>
                                <option value="Jane Smith (Remote)">Jane Smith (Remote)</option>
                                <option value="Ryan Lee (Hybrid)">Ryan Lee (Hybrid)</option>
                                <option value="Maria Garcia (In-person)">Maria Garcia (In-person)</option>
                            </select>
                        </div>
                        
                        <div class="task-item">
                            <div class="task-name">Task 6</div>
                            <select class="assignment-dropdown" name="task6">
                                <option value="">Select assignee...</option>
                                <option value="Jane Smith (Remote)">Jane Smith (Remote)</option>
                                <option value="Ryan Lee (Hybrid)">Ryan Lee (Hybrid)</option>
                                <option value="Maria Garcia (In-person)">Maria Garcia (In-person)</option>
                            </select>
                        </div>
                    </div>
                </div>
            `;
        },
        choices: ['Submit Assignments'],
        button_html: '<button class="submit-btn">%choice%</button>',
        on_load: function() {
            // Add validation to ensure all tasks are assigned before allowing submission
            const submitBtn = document.querySelector('.submit-btn');
            const dropdowns = document.querySelectorAll('.assignment-dropdown');
            
            function checkAllAssigned() {
                const allAssigned = Array.from(dropdowns).every(dropdown => {
                    return dropdown.value !== "";
                });
                
                submitBtn.disabled = !allAssigned;
            }
            
            // Initial check
            checkAllAssigned();
            
            // Add event listeners to all dropdowns
            dropdowns.forEach(dropdown => {
                dropdown.addEventListener('change', checkAllAssigned);
            });
        },
        on_finish: function(data) {
            // Collect all the assignments
            const assignments = {};
            const dropdowns = document.querySelectorAll('.assignment-dropdown');
            dropdowns.forEach(dropdown => {
                assignments[dropdown.name] = dropdown.value;
            });
            data.assignments = assignments;
        }
    };

    const timeline = [task_assignment_trial];

    jsPsych.run(timeline);
</script>
</html>